@page _2_6_LoadtheOutputPlacementinVivado Load the Output Placement in Vivado
# Load the Output Placement in Vivado

After the placemnt completes, a Tcl file will be generated in the directory specified by "dumpDirectory" in the JSON configuration file. Currently, the mentioned Tcl file is named "DumpCLBPacking-first-0.tcl" since it is dumped by the ParallelCLBPacker.

You can go through the following steps to load the AMFPlacer result into Vivado Implementation.

* a. Please ensure that your Vivado has the license for the specific device, so you can open the Device window by clicking on the top bar "Window->Device"
* b. Open your design in Vivado and click on "Open Implemented Design" in the flow navigator and execut the command below in the Tcl console of Vivado.

```tcl
# replace XXXXX with the path specified by the "dumpDirectory" you specified in the configuration files.
source XXXXX/DumpCLBPacking-first-0.tcl
```
* c. Then you can wait until the placement and routing finish. The Tcl script will clear the Vivado placement result and packing information, which might take ~10 minutes for medium-size designs (50% resource). Then it will place the cells according to the AMFPlacer result, which might take ~20 minutes for medium-size designs (50% resource). Finally, it will call Vivado Placer to verify AMFPlacer's placement, handle a small number (tens) of Xilinx primitive cells (e.g., the clock buffer placement) and do routing. 

Below is a screenshot when the AMFPlacer's placement is loading on Vivado. The orange blocks means the cells are placed are set fixed on the device.

<center>
<img src="loadPlacement.png" align="center" alt="AMFPlacer's placement is loading on Vivado" title="AMFPlacer's placement is loading on Vivado" width="400" /> 
</center>


Users can launch Vivado GUI, open their Vivado project, directly "Open Implemented Design" and source the tcl file generated by AMF-Placer.

<center>
<img src="openImpl.png" align="center" alt="openImpled Design" title="openImpled Design" width="200" /> 
</center>

This placement loading flow might be a bit tricky since we are trying to be compatible with Vivado. Theoratically, since we utilize "catch" in the Tcl script to handle the errors, the flow should not be stopped by those minor exceptions and we have tested this flow with Vivado 2019-2021. If you encounter unexpected problems, please feel free to let us know in [GitHub Issue](https://github.com/zslwyuan/AMF-Placer/issues).

There might be some known problems when you are trying to load the generated placement into Vivado. Please check [the existing problems when exporting to Vivado](@ref _7_portabilityToVivadoProblem) for reasons and solutions.

For users' testing and exploration, we provide some Vivado projects of the benchmarks with post-implementation designs from here: (@subpage _3_3_DownloadPostImplementationVivadoProjects).