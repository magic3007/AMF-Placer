@page _2_4_ExtractDesignInformationfromVivado Extract Design Information from Vivado
# Extract Design Information from Vivado

Users can go through the following steps to extract the information of specific designs. Please note that we have provide a set of benchmarks for VCU108 which can be found in "benchmarks/VCU108/design". Please note that for a design, you can go through this extraction flow just ONE TIME. You DON'T need to do this every time your run AMFPlacer.

* a. Please ensure that your design has sucessfully gone through the general Vivado flow to "Generate Bistream". In this way, Vivado will check your design to avoid some bugs in  frond-end design stages, and meanwhile we can extrat information of your design, even part of which are some of them are blackbox IPs in Vivado, from the "Implemented Design" which has gone through the placement and routing of Vivado.
* b. Open the Tcl script "benchmarks/vivadoScripts/extractDesignInfo.tcl" in the project directory where you can find the below content at the beginning and modify them according to the comments suggesting.
```tcl
# replace this with the name for your benchmark
set benchmarkName "OpenPiton" 
# replace this path with your one to specify where to store the files of extracted data
set targetFolderPath "/home/tingyuan/tmpFiles/" 
```
* c. Open your design in Vivado and "Open Implemented Design" and execut the command below in the Tcl console of Vivado. It might take tens of minutes or ~1hour to finish the extraction due to the slow Tcl execution related to strings and IOs in Vivado.
```tcl
# replace XXXXX to indicate where your AMFPlacer is located.
source XXXXX/AMF-Placer/benchmarks/vivadoScripts/extractDesignInfo.tcl
```
* d. Finally, you should be able to find the extracted files in target folder path set by you. Below is an example showing the generated files for OpenPiton:

<center>
<img src="designFiles.png" align="center"  alt="Design Files" title="Design Files" width="300" /> 
</center>


Below is an example showing what text file is in the extracted archive file. The information of each cell will cost multiple lines. 

The first line for a cell in the design netlist will be the one begin with "curCell=> " and provide the name and type of the cell.

Then the following lines after this cell declaration are the lines for the pins on this cell. Each of these lines begins with "pin=>". 
The pin information will keep loading until another line beginning with "curCell=> " is found.
For each pin, the name, reference name on cell, IO direction relative the cell, the name of connected net and the name of the driver pin of the connected net will be provided in one line.



<pre><span class="pl-c1">curCell</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9 <span class="pl-c1">type</span><span class="pl-k">=&gt;</span> LUT6
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/O <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> O <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> OUT <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9_n_0 <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/O
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/I0 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I0 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data[223] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data_reg[223]/Q
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/I1 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I1 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data[95] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data_reg[95]/Q
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/I2 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I2 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_out_sel_next_r_reg[3] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_out_sel_next_r_reg[3]/Q
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/I3 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I3 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data[159] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data_reg[159]/Q
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/I4 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I4 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_out_sel_next_r_reg[4] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_out_sel_next_r_reg[4]/Q
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_9/I5 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I5 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data[31] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_data_reg[31]/Q
<span class="pl-c1">curCell</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0] <span class="pl-c1">type</span><span class="pl-k">=&gt;</span> FDRE
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]/Q <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> Q <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> OUT <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[0] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]/Q
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]/C <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> C <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/aclk <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/xilinx_dma_pcie_ep_0/inst/xdma_0_i/inst/pcie3_ip_i/inst/xdma_0_pcie3_ip_gt_top_i/phy_clk_i/bufg_gt_userclk/O
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]/CE <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> CE <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_0 <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[7]_i_1/O
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]/D <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> D <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/p_0_in[0] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[0]_i_1/O
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]/R <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> R <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/&lt;const0&gt; <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/GND/G
<span class="pl-c1">curCell</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]_i_2 <span class="pl-c1">type</span><span class="pl-k">=&gt;</span> MUXF7
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]_i_2/O <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> O <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> OUT <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]_i_2_n_0 <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]_i_2/O
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]_i_2/I0 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I0 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[0]_i_6_n_0 <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[0]_i_6/O
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]_i_2/I1 <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> I1 <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[0]_i_7_n_0 <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data[0]_i_7/O
   <span class="pl-c1">pin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r1_data_reg[0]_i_2/S <span class="pl-c1">refpin</span><span class="pl-k">=&gt;</span> S <span class="pl-c1">dir</span><span class="pl-k">=&gt;</span> IN <span class="pl-c1">net</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_out_sel_next_r_reg[2] <span class="pl-c1">drivepin</span><span class="pl-k">=&gt;</span> design_1_i/axis_dwidth_converter_0/inst/gen_downsizer_conversion.axisc_downsizer_0/r0_out_sel_next_r_reg[2]/Q</pre>